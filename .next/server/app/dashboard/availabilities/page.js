(()=>{var e={};e.id=322,e.ids=[322,181],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},4577:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},4390:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>n});var r=a(7096),s=a(6132),i=a(7284),l=a.n(i),o=a(2564),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);a.d(t,d);let n=["",{children:["dashboard",{children:["availabilities",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3440)),"C:\\Users\\tribeiro\\Documents\\church-schedule-app\\church-schedule-app\\app\\dashboard\\availabilities\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,5345)),"C:\\Users\\tribeiro\\Documents\\church-schedule-app\\church-schedule-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\tribeiro\\Documents\\church-schedule-app\\church-schedule-app\\app\\dashboard\\availabilities\\page.tsx"],x="/dashboard/availabilities/page",u={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/availabilities/page",pathname:"/dashboard/availabilities",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},5388:(e,t,a)=>{Promise.resolve().then(a.bind(a,8899))},8899:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>AvailabilitiesPage});var r=a(784),s=a(9885),i=a(1440),l=a.n(i),o=a(6568);function AvailabilitiesPage(){let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)({}),[d,n]=(0,s.useState)(null),[c,x]=(0,s.useState)(null),[u,p]=(0,s.useState)(!1),[m,h]=(0,s.useState)("");(0,s.useEffect)(()=>{(async function(){let{data:e,error:a}=await o.O.from("celebrations").select("id, starts_at, location, notes").gte("starts_at",new Date().toISOString()).order("starts_at");if(a){n(a.message);return}t(e??[]);let{data:r,error:s}=await o.O.from("availabilities").select("*");if(!s&&r){let e={};r.forEach(t=>{e[t.celebration_id]=t.available}),i(e)}})()},[]);let b=(0,s.useMemo)(()=>{let t=m.trim().toLowerCase();return e.filter(e=>{let r=!t||e.location.toLowerCase().includes(t)||(e.notes??"").toLowerCase().includes(t)||new Date(e.starts_at).toLocaleDateString("pt-BR").toLowerCase().includes(t),s=!!a[e.id],i=!u||s;return r&&i})},[e,a,u,m]);async function toggleAvailability(e){let t=!a[e];x(e),n(null),i(a=>({...a,[e]:t}));let r=await fetch("/api/availabilities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({celebration_id:e,available:t})});if(!r.ok){let a=await r.json();n(a.error||"N\xc3\xa3o foi poss\xc3\xadvel atualizar sua disponibilidade."),i(a=>({...a,[e]:!t}))}x(null)}return r.jsx("div",{className:"min-h-screen bg-slate-950 bg-gradient-to-br from-slate-900 via-slate-950 to-indigo-950 text-slate-100",children:(0,r.jsxs)("div",{className:"mx-auto flex max-w-6xl flex-col gap-10 px-6 py-12",children:[(0,r.jsxs)("header",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-10 shadow-xl shadow-indigo-900/20 backdrop-blur",children:[r.jsx("div",{className:"absolute -left-10 top-1/2 h-40 w-40 -translate-y-1/2 rounded-full bg-teal-500/20 blur-3xl"}),r.jsx("div",{className:"absolute -right-14 -top-12 h-40 w-40 rounded-full bg-emerald-400/20 blur-3xl"}),(0,r.jsxs)("div",{className:"relative flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-emerald-200/80",children:"Servindo com alegria"}),r.jsx("h1",{className:"mt-2 text-3xl font-black md:text-4xl",children:"\xf0Ÿ—“\xef\xb8\x8f Minhas disponibilidades"}),r.jsx("p",{className:"mt-4 max-w-2xl text-sm text-emerald-100/80",children:"Atualize com rapidez os dias em que voc\xc3\xaa pode servir. Cada confirma\xc3\xa7\xc3\xa3o ajuda a montar escalas equilibradas e acolhedoras."})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3 text-sm text-emerald-100/80",children:[r.jsx(l(),{href:"/dashboard",className:"inline-flex items-center gap-2 self-start rounded-full border border-white/10 bg-white/10 px-4 py-2 font-semibold transition hover:bg-white/20",children:"\xe2†\x90 Voltar ao painel"}),r.jsx("span",{className:"rounded-full border border-emerald-200/30 bg-emerald-500/20 px-4 py-2 font-semibold text-emerald-100",children:"\xf0Ÿ\xa4\x9d Juntos pela Igreja da Cidade Trememb\xc3\xa9"})]})]})]}),d&&(0,r.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/10 p-4 text-sm text-rose-200",children:["\xe2š\xa0\xef\xb8\x8f ",d]}),(0,r.jsxs)("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-8 shadow-lg shadow-emerald-900/20",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Agenda de cultos"}),r.jsx("p",{className:"mt-2 text-sm text-emerald-100/80",children:"Marque presen\xc3\xa7a com anteced\xc3\xaancia. Voc\xc3\xaa pode filtrar por local ou data."})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-slate-900/50 px-4 py-2 text-sm text-emerald-100/80",children:["\xf0Ÿ”\x8d",r.jsx("input",{type:"text",placeholder:"Buscar por data ou local",value:m,onChange:e=>h(e.target.value),className:"w-full bg-transparent text-sm text-white placeholder:text-emerald-100/40 focus:outline-none"})]}),r.jsx("button",{type:"button",onClick:()=>p(e=>!e),className:`inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-semibold transition ${u?"border-emerald-200/40 bg-emerald-500/80 text-white shadow-lg shadow-emerald-900/20":"border-white/10 bg-white/10 text-emerald-100/80 hover:bg-white/20"}`,children:u?"\xe2œ… Mostrando apenas confirmados":"\xf0Ÿ‘€ Mostrar apenas confirmados"})]})]}),(0,r.jsxs)("div",{className:"mt-8 space-y-4",children:[0===b.length&&r.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/10 p-6 text-sm text-emerald-100/70",children:"Nada por aqui no filtro atual. Que tal remover os filtros ou consultar a secretaria? \xf0Ÿ’Œ"}),b.map(e=>{let t=new Date(e.starts_at),s=t.toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long"}),i=t.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),l=!!a[e.id];return(0,r.jsxs)("article",{className:"flex flex-col gap-4 rounded-2xl border border-white/10 bg-slate-900/50 p-6 shadow-inner shadow-black/40 transition hover:border-emerald-200/40",children:[(0,r.jsxs)("header",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-widest text-emerald-200/70",children:"Pr\xc3\xb3ximo culto"}),(0,r.jsxs)("h3",{className:"text-xl font-semibold text-white",children:[s," \xc2\xb7 ",i]}),r.jsx("p",{className:"text-sm font-semibold text-emerald-100",children:e.notes??"Celebracao sem nome"}),(0,r.jsxs)("p",{className:"text-sm text-emerald-100/70",children:["\xf0Ÿ“\x8d ",e.location]})]}),r.jsx("button",{type:"button",onClick:()=>toggleAvailability(e.id),disabled:c===e.id,className:`inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-semibold transition ${l?"border-emerald-200/40 bg-emerald-500/80 text-white shadow-lg shadow-emerald-900/20 hover:bg-emerald-400":"border-white/10 bg-white/10 text-emerald-100/80 hover:bg-white/20"} ${c===e.id?"cursor-wait opacity-70":""}`,children:c===e.id?"Enviando...":l?"\xe2œ… Confirmado para servir":"\xf0Ÿ\xa4\x9d Marcar presen\xc3\xa7a"})]}),(0,r.jsxs)("footer",{className:"flex flex-wrap items-center gap-3 text-xs text-emerald-100/70",children:[(0,r.jsxs)("span",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-1",children:["ID \xc2\xb7 ",e.id.slice(0,8).toUpperCase()]}),(0,r.jsxs)("span",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-1",children:["\xe2\x8f\xb1\xef\xb8\x8f ",t.toLocaleString("pt-BR")]}),r.jsx("span",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-1",children:l?"\xf0ŸŸ\xa2 Voc\xc3\xaa est\xc3\xa1 escalado(a)":"\xe2š\xaa Aguardando confirma\xc3\xa7\xc3\xa3o"})]})]},e.id)})]})]})]})})}},6568:(e,t,a)=>{"use strict";a.d(t,{O:()=>s});var r=a(3334);let s=(0,r.createBrowserSupabaseClient)()},3440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>d});var r=a(5153);let s=(0,r.createProxy)(String.raw`C:\Users\tribeiro\Documents\church-schedule-app\church-schedule-app\app\dashboard\availabilities\page.tsx`),{__esModule:i,$$typeof:l}=s,o=s.default,d=o},1440:(e,t,a)=>{e.exports=a(614)}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[657,962,585,614,594],()=>__webpack_exec__(4390));module.exports=a})();